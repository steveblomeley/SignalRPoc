@model IEnumerable<SignalRPoc.Models.Model>

@{
    ViewBag.Title = "Index";
}
<div class="alert alert-success hidden" id="alert-success"></div>
<div class="alert alert-danger hidden" id="alert-error"></div>
<h2>Index</h2>

<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Data)
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {

        var targetId = $"editor-for-model-{item.Id}";

        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Data)
            </td>
            <td>
                @Ajax.ActionLink(
                    $"Edit",
                    MVC.Data.Edit(item.Id),
                    new AjaxOptions
                    {
                        UpdateTargetId = @targetId,
                        InsertionMode = InsertionMode.Replace,
                        HttpMethod = "Get"
                    })
            </td>
        </tr>
        <tr id="@targetId"></tr>
    }
</table>

<div id="no-more-data" class="hidden"><h3>No more data to edit!</h3></div>

@section scripts{
    <script src="~/Scripts/jquery.unobtrusive-ajax.js"></script>
    <script src="~/Scripts/SignalRPoco/App.js"></script>
}
